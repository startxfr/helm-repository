# Default values for configuration of a STARTX cluster
# see values.yaml for explanation on each params
context: 
  scope: pragmatik
  cluster: ocp-rec
  environment: recette
  component: machine
  app: pragmatik-machine

cluster:
  id: ocp-rec-b9p2g
  autoscaler: 
    enabled: false
    spec: |
      podPriorityThreshold: -10 
      resourceLimits:
        maxNodesTotal: 20
        cores:
          min: 24
          max: 160
        memory:
          min: 80
          max: 640
      scaleDown: 
        enabled: true 
        delayAfterAdd: 5m 
        delayAfterDelete: 3m 
        delayAfterFailure: 30s 
        unneededTime: 120s 

machineConfigPool: 
  enabled: false
  infra: true
  storage: false
machineConfig: 
  enabled: false
  kubelet_gc_enabled: false
  kubelet_connectiontimeout_enabled: false
  kubelet_protectkerneldefaults: false
  infra_specialconfig: false
  add_scc_netraw: false
  add_clusterimageconfig: false

machineHealthCheck:
  enabled: false
  list: 
  - name: master
    type: master
    maxUnhealthy: 100%
    timeouts: 300s
  - name: infra
    type: infra
    maxUnhealthy: 40%
    timeouts: 300s
  - name: ada-dev
    type: worker
    group: ocp-ada-dev-worker
    maxUnhealthy: 40%
    timeouts: 300s
  - name: ada-rec
    type: worker
    group: ocp-ada-rec-worker
    maxUnhealthy: 40%
    timeouts: 300s
  - name: homebox-dev
    type: worker
    group: ocp-homebox-dev-worker
    maxUnhealthy: 40%
    timeouts: 300s
  - name: homebox-rec
    type: worker
    group: ocp-homebox-rec-worker
    maxUnhealthy: 40%
    timeouts: 300s

machineAutoscaler: 
  enabled: false
  list: 
  - name: ocp-infra
    type: infra
    minReplicas: 0
    maxReplicas: 4
  - name: ocp-ada-dev-worker
    type: worker
    minReplicas: 0
    maxReplicas: 4
  - name: ocp-ada-rec-worker
    type: worker
    minReplicas: 0
    maxReplicas: 4
  - name: ocp-homebox-dev-worker
    type: worker
    minReplicas: 0
    maxReplicas: 4
  - name: ocp-homebox-rec-worker
    type: worker
    minReplicas: 0
    maxReplicas: 4

machineSet: 
  enabled: true
  list:
  - name: ocp-infra-rec
    provider: "vsphere"
    additionnalsLabels: |
      client: pragmatik
      env: rec
    numCoresPerSocket: 4
    numCPUs: 4
    diskGiB: 120
    memoryMiB: 16384
    networkName: "VLANXXX"
    datacenter: "OpenShift"
    datastore: "VOLUMENAME"
    folder: "/OpenShift/vm/ocp-rec-b9p2g"
    server: "vcenter.example.local"
    replicas: 1
